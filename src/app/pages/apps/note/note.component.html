<!-- TELA DE NOTAS EM CARDS - VERSÃƒO KIDS -->
<div class="kids-notes-page">

  <!-- CabeÃ§alho Divertido -->
  <div class="kids-header">
    <div class="mascot-container">
      <div class="mascot animate-bounce">
        <span class="mascot-emoji">ğŸ“š</span>
      </div>
    </div>
    <h1 class="kids-title">
      <span class="title-icon">ğŸŒŸ</span>
      Minhas Notinhas
      <span class="title-icon">ğŸŒŸ</span>
    </h1>
    <p class="kids-subtitle">Arraste os cards para organizar!</p>
  </div>

  <!-- BotÃ£o de Flashcard -->
  <div class="flashcard-section">
    <button class="flashcard-btn animate-wiggle" matTooltip="Jogar Flashcards!" (click)="openFlashcard()">
      <span class="btn-emoji">ğŸƒ</span>
      <span class="btn-text">Jogar Flashcards!</span>
      <span class="btn-emoji">ğŸ®</span>
    </button>
  </div>

  <!-- Grid de Cards -->
  <div class="kids-cards-grid" cdkDropList (cdkDropListDropped)="drop($event)">

    <div class="kids-card animate-slide-up" *ngFor="let note of notes$ | async; trackBy: trackById" cdkDrag>

      <!-- AlÃ§a de arrastar -->
      <div class="drag-handle" cdkDragHandle>
        <span class="handle-emoji">âœ‹</span>
        <span class="handle-text">Arraste!</span>
      </div>

      <!-- CabeÃ§alho do Card -->
      <div class="card-header" [ngClass]="getTagClass(note.tags)">
        <span class="tag-emoji">{{ getTagEmoji(note.tags) }}</span>
        <h4 class="card-title">{{ note.title }}</h4>
      </div>

      <!-- ConteÃºdo do Card -->
      <div class="card-content">
        <p class="description">
          <span class="content-icon">ğŸ’­</span>
          {{ note.description }}
        </p>

        <div class="card-info">
          <div class="info-item" *ngIf="note.answer">
            <span class="info-icon">ğŸ’¡</span>
            <span class="info-label">Resposta:</span>
            <span class="info-value">{{ note.answer }}</span>
          </div>

          <div class="info-item">
            <span class="info-icon">{{ getLevelEmoji(note.level) }}</span>
            <span class="info-label">NÃ­vel:</span>
            <span class="info-value level-badge" [ngClass]="'level-' + note.level">
              {{ getLevelText(note.level) }}
            </span>
          </div>

          <div class="info-item" *ngIf="note.permanent">
            <span class="info-icon">â­</span>
            <span class="info-label">Nota Especial!</span>
          </div>

          <div class="info-item">
            <span class="info-icon">ğŸ“…</span>
            <span class="info-label">Criado:</span>
            <span class="info-value">{{ convertToDate(note.created_at) | date: 'dd/MM/yyyy' }}</span>
          </div>
        </div>

        <!-- Imagem (se houver) -->
        <div class="card-image" *ngIf="note.image">
          <img [src]="note.image" alt="Imagem da nota" (error)="handleImageError($event)">
        </div>
      </div>

      <!-- AÃ§Ãµes do Card -->
      <div class="card-actions">
        <button class="action-btn action-speak" matTooltip="Ouvir nota" (click)="speak(note)">
          <span class="action-emoji">ğŸ”Š</span>
          <span class="action-text">Ouvir</span>
        </button>

        <button class="action-btn action-star" matTooltip="Marcar como especial" (click)="togglePermanent(note)">
          <span class="action-emoji">{{ note.permanent ? 'â­' : 'â˜†' }}</span>
          <span class="action-text">{{ note.permanent ? 'Especial!' : 'Favoritar' }}</span>
        </button>

        <button class="action-btn action-delete" matTooltip="Apagar nota" (click)="deleteNote(note._id)">
          <span class="action-emoji">ğŸ—‘ï¸</span>
          <span class="action-text">Apagar</span>
        </button>
      </div>

      <!-- Badge de Tag -->
      <div class="tag-badge" [ngClass]="getTagClass(note.tags)">
        {{ getTagText(note.tags) }}
      </div>
    </div>

  </div>

  <!-- Mensagem quando nÃ£o hÃ¡ notas -->
  <div class="empty-state" *ngIf="(notes$ | async)?.length === 0">
    <span class="empty-emoji animate-float">ğŸ“</span>
    <h3>Nenhuma nota ainda!</h3>
    <p>Que tal criar sua primeira nota?</p>
    <button class="create-btn" [routerLink]="['/apps/noteinsert']">
      <span class="btn-emoji">âœ¨</span>
      Criar Nota
    </button>
  </div>

  <!-- BotÃµes de NavegaÃ§Ã£o -->
  <div class="kids-navigation">
    <button class="nav-btn nav-create" [routerLink]="['/apps/noteinsert']" matTooltip="Criar nova nota">
      <span class="nav-emoji">â•</span>
      <span class="nav-text">Nova Nota</span>
    </button>

    <button class="nav-btn nav-list" [routerLink]="['/apps/list']" matTooltip="Ver lista de notas">
      <span class="nav-emoji">ğŸ“‹</span>
      <span class="nav-text">Lista</span>
    </button>

    <button class="nav-btn nav-graph" [routerLink]="['/apps/graph']" matTooltip="Ver mapa mental">
      <span class="nav-emoji">ğŸ—ºï¸</span>
      <span class="nav-text">Mapa</span>
    </button>
  </div>

  <!-- Dica do dia -->
  <div class="kids-tip animate-float">
    <span class="tip-icon">ğŸ’¡</span>
    <span class="tip-text">Dica: Arraste os cards para organizar suas notas!</span>
  </div>

</div>
