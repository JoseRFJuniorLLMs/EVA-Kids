<mat-dialog-content class="flashcard-dialog">
  <!-- Cabecalho -->
  <div class="flashcard-header">
    <span class="header-emoji">ğŸ“š</span>
    <h2 class="header-title">Aprender Palavras</h2>
    <span class="header-progress">{{ currentWordIndex + 1 }} / {{ words.length }}</span>
  </div>

  <!-- Card Principal -->
  <div class="flashcard-container">
    <!-- Visualizador de Audio -->
    <div class="audio-visualizer">
      <canvas #audioVisualizer></canvas>
      <div class="visualizer-status" *ngIf="isSpeaking">
        <span class="speaking-icon">ğŸ”Š</span>
      </div>
    </div>

    <!-- Flashcard -->
    <mat-card class="flashcard-card" @fade>
      <mat-card-content>
        <!-- Palavra em Ingles -->
        <div class="word-section" *ngIf="!showTranslation">
          <span class="flag-emoji">ğŸ‡ºğŸ‡¸</span>
          <p class="word-text">{{ words[currentWordIndex] }}</p>
          <button class="repeat-btn" (click)="repeatWord()" [disabled]="isSpeaking" matTooltip="Ouvir novamente">
            <span>ğŸ”</span>
          </button>
        </div>

        <!-- Traducao em Portugues -->
        <div class="translation-section" *ngIf="showTranslation">
          <span class="flag-emoji">ğŸ‡§ğŸ‡·</span>
          <p class="translation-text">{{ translations[currentWordIndex] }}</p>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Indicadores de Loading e Erro -->
    <div class="status-area">
      <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="accent"></mat-progress-bar>
      <p class="error-text" *ngIf="errorText">{{ errorText }}</p>
    </div>
  </div>

  <!-- Controles -->
  <div class="flashcard-controls">
    <!-- Mostrar Traducao -->
    <button
      class="control-btn show-translation-btn"
      (click)="showTranslationAndSpeak()"
      [disabled]="showTranslation || isSpeaking"
      matTooltip="Ver traducao">
      <span class="btn-emoji">ğŸ‘€</span>
      <span class="btn-label">Ver</span>
    </button>

    <!-- Proxima Palavra -->
    <button
      class="control-btn next-btn"
      (click)="showNextWord()"
      [disabled]="isSpeaking"
      matTooltip="Proxima palavra">
      <span class="btn-emoji">â¡ï¸</span>
      <span class="btn-label">Proxima</span>
    </button>

    <!-- Auto Play -->
    <button
      class="control-btn auto-btn"
      [class.active]="autoChangeEnabled"
      (click)="toggleAutoChange()"
      matTooltip="{{ autoChangeEnabled ? 'Parar automatico' : 'Modo automatico' }}">
      <span class="btn-emoji">{{ autoChangeEnabled ? 'â¸ï¸' : 'â–¶ï¸' }}</span>
      <span class="btn-label">{{ autoChangeEnabled ? 'Parar' : 'Auto' }}</span>
    </button>

    <!-- Parar Audio -->
    <button
      class="control-btn stop-btn"
      (click)="stopAudio()"
      *ngIf="isSpeaking"
      matTooltip="Parar audio">
      <span class="btn-emoji">ğŸ›‘</span>
    </button>
  </div>

  <!-- Dica -->
  <div class="tip-area">
    <span class="tip-icon">ğŸ’¡</span>
    <span class="tip-text">Clique em "Ver" para ouvir a traducao!</span>
  </div>
</mat-dialog-content>
