<!-- LISTA DE NOTAS - VERSÃƒO KIDS -->
<div class="kids-list-page">

  <!-- CabeÃ§alho Divertido -->
  <div class="kids-header">
    <div class="mascot-container">
      <div class="mascot animate-bounce">
        <span class="mascot-emoji">ğŸ”</span>
      </div>
    </div>
    <h1 class="kids-title">
      <span class="title-icon">ğŸ“š</span>
      Minhas AnotaÃ§Ãµes
      <span class="title-icon">ğŸ“š</span>
    </h1>
    <p class="kids-subtitle">Encontre suas notas favoritas!</p>
  </div>

  <!-- Barra de Pesquisa Kids -->
  <div class="kids-search-container animate-slide-up">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        class="kids-search-input"
        placeholder="Digite para buscar..."
        [(ngModel)]="searchTerm"
        (input)="searchNotes()"
      />
      <button class="search-btn" (click)="searchNotes()">
        <span class="btn-emoji">âœ¨</span>
        Buscar!
      </button>
    </div>
  </div>

  <!-- BotÃµes de AÃ§Ã£o RÃ¡pida -->
  <div class="quick-actions animate-slide-up">
    <button class="action-bubble action-flashcard" matTooltip="Jogar Flashcards!" (click)="openFlashcard()">
      <span class="bubble-emoji">ğŸƒ</span>
      <span class="bubble-text">Flashcards</span>
    </button>

    <button class="action-bubble action-rsvp" matTooltip="Leitura RÃ¡pida!" (click)="openSRVP()">
      <span class="bubble-emoji">âš¡</span>
      <span class="bubble-text">Leitura RÃ¡pida</span>
    </button>

    <div class="notes-counter">
      <span class="counter-emoji">ğŸ“</span>
      <span class="counter-number">{{ (totalNotes$ | async) ?? 0 }}</span>
      <span class="counter-text">notas</span>
    </div>
  </div>

  <!-- Lista de Notas -->
  <div class="notes-list" *ngIf="filteredNotes$ | async as notes; else loading">

    <div *ngIf="notes.length > 0; else noNotes">
      <div class="note-item animate-slide-up" *ngFor="let note of notes; let i = index" [style.animation-delay]="(i * 0.1) + 's'">

        <!-- Ãcone de Tag -->
        <div class="note-tag-icon" [ngClass]="getTagClass(note.tags)">
          <span class="tag-emoji">{{ getTagEmoji(note.tags) }}</span>
        </div>

        <!-- ConteÃºdo da Nota -->
        <div class="note-content">
          <h3 class="note-title">
            {{ note.title }}
            <span class="permanent-star" *ngIf="note.permanent">â­</span>
          </h3>

          <p class="note-description">{{ note.description }}</p>

          <div class="note-details">
            <span class="detail-item" *ngIf="note.answer">
              <span class="detail-icon">ğŸ’¡</span>
              {{ note.answer }}
            </span>

            <span class="detail-item detail-tag">
              <span class="detail-icon">ğŸ·ï¸</span>
              {{ getTagText(note.tags) }}
            </span>

            <span class="detail-item detail-level" [ngClass]="'level-' + note.level">
              <span class="detail-icon">{{ getLevelEmoji(note.level) }}</span>
              {{ getLevelText(note.level) }}
            </span>
          </div>

          <!-- Imagem (se houver) -->
          <div class="note-image" *ngIf="note.image">
            <img [src]="note.image" alt="Imagem da nota" (error)="handleImageError($event)">
          </div>
        </div>

        <!-- BotÃµes de AÃ§Ã£o -->
        <div class="note-actions">
          <button class="action-btn action-view" matTooltip="Ver nota" (click)="viewNote(note)">
            <span class="action-emoji">ğŸ‘ï¸</span>
          </button>

          <button class="action-btn action-edit" matTooltip="Editar nota" (click)="editNote(note)">
            <span class="action-emoji">âœï¸</span>
          </button>

          <button class="action-btn action-delete" matTooltip="Apagar nota" (click)="deleteNote(note._id)">
            <span class="action-emoji">ğŸ—‘ï¸</span>
          </button>
        </div>

      </div>
    </div>

    <!-- Estado: Nenhuma nota encontrada -->
    <ng-template #noNotes>
      <div class="empty-state">
        <span class="empty-emoji animate-float">ğŸ”</span>
        <h3>Nenhuma nota encontrada!</h3>
        <p>Tente buscar com outras palavras</p>
        <button class="create-btn" [routerLink]="['/apps/noteinsert']">
          <span class="btn-emoji">âœ¨</span>
          Criar Nova Nota
        </button>
      </div>
    </ng-template>

  </div>

  <!-- Estado: Carregando -->
  <ng-template #loading>
    <div class="loading-state">
      <div class="loading-spinner animate-bounce">
        <span class="spinner-emoji">â³</span>
      </div>
      <p class="loading-text">Carregando suas notas...</p>
    </div>
  </ng-template>

  <!-- NavegaÃ§Ã£o -->
  <div class="kids-navigation">
    <button class="nav-btn nav-create" [routerLink]="['/apps/noteinsert']" matTooltip="Criar nova nota">
      <span class="nav-emoji">â•</span>
      <span class="nav-text">Nova Nota</span>
    </button>

    <button class="nav-btn nav-cards" [routerLink]="['/apps/notes']" matTooltip="Ver em cards">
      <span class="nav-emoji">ğŸƒ</span>
      <span class="nav-text">Cards</span>
    </button>

    <button class="nav-btn nav-graph" [routerLink]="['/apps/graph']" matTooltip="Ver mapa mental">
      <span class="nav-emoji">ğŸ—ºï¸</span>
      <span class="nav-text">Mapa</span>
    </button>
  </div>

  <!-- Dica do dia -->
  <div class="kids-tip animate-float">
    <span class="tip-icon">ğŸ’¡</span>
    <span class="tip-text">Dica: Use palavras-chave para encontrar suas notas mais rÃ¡pido!</span>
  </div>

</div>
